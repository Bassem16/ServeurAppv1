<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Espace membre</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<h:outputScript library="default" name="javascript/jquery.min.js" />
	<h:outputScript library="default"
		name="javascript/jquery.dropotron.min.js" />
	<h:outputScript library="default"
		name="javascript/jquery.scrollgress.min.js" />
	<h:outputScript library="default" name="javascript/skel.min.js" />
	<h:outputScript library="default" name="javascript/skel-layers.min.js" />
	<h:outputScript library="default" name="javascript/init.js" />
	<noscript>
		<h:outputStylesheet library="default" name="css/skel.css" />
		<h:outputStylesheet library="default" name="css/style.css" />
		<h:outputStylesheet library="default" name="css/style-wide.css" />
	</noscript>
</h:head>

<h:body>
<!-- Header -->
	<header id="header" class="skel-layers-fixed">
	<h1>
		<a href="../index.xhtml">Team Trade</a> par The Team
	</h1>
	<nav id="nav">
	<ul>
	<li>connecté en tant que #{connexionBean.prenomPersonne} #{connexionBean.nomPersonne}</li>
		<li><a href="../index.xhtml">Accueil</a></li>
		<li><a href="" class="icon fa-angle-down">Investisseur</a>
			<ul>
				<li><h:link value="Rechercher Titres" outcome="/Investisseur/research.xhtml" /></li>
				<li><h:link value="Rechercher Entreprise"
					outcome="/Investisseur/research_company.xhtml" /></li>
				<li><h:link value="Accueil Investisseur"
					outcome="/Investisseur/home.xhtml" /></li>
			</ul></li>
		<li>
			<c:if test="#{connexionBean.connected}">
	    		<h:form><h:commandButton value="Deconnexion" action="#{connexionBean.doLogout}" class="button"></h:commandButton></h:form>
	    	</c:if>
    	</li>
	</ul>
	</nav> 
	</header>
	
	<input id="copy" type="checkbox" name="copy"></input>
<label for="copy">Email me a copy of this message</label>
	
<!-- Main -->
	<section id="main" class="container">
		<header>
			<h2>Page de recherche des titres</h2>
			<p>Vous pouvez rechercher les titres disponibles par entreprise émettrice, par propriétaire du titre et par type de titre.</p>
		</header>
<h:form>
		<div class="row">
			<div class="12u">
				<section class="box">

		<h3>Rechercher un titre</h3>

		<f:ajax event="click" render="result">
			<h:selectBooleanCheckbox
				value="#{gestionInvestisseurBean.entrepriseChek}"
				id="entrepriseCheck" />
			<label for="entrepriseCheck">Par entreprise</label> 
				
			
			<h:selectOneMenu value="#{gestionInvestisseurBean.entrepriseNom}">
				<f:selectItems value="#{gestionInvestisseurBean.listEntreprise()}"
					var="e" itemLabel="#{e.nomEntreprise}"
					itemValue="#{e.nomEntreprise}" />
			</h:selectOneMenu>
		</f:ajax>


		<br></br>
		<f:ajax event="click" render="result">
			<h:selectBooleanCheckbox value="#{gestionInvestisseurBean.typeCheck}"
				id="typeCheck" /><label for="typeCheck">Par type</label>
		

		
			<h:selectOneMenu value="#{gestionInvestisseurBean.typeNom}">
				<f:selectItem itemValue="Action" itemLabel="Action" />
				<f:selectItem itemValue="Option" itemLabel="Option" />
			</h:selectOneMenu>
		</f:ajax>
		<br></br>
		<f:ajax event="click" render="result">
			<h:selectBooleanCheckbox value="#{gestionInvestisseurBean.userCheck}"
				id="userCheck" /><label for="userCheck">Par Utilisateur</label>

		
			<h:selectOneMenu value="#{gestionInvestisseurBean.userNom}">
				<f:selectItems value="#{gestionInvestisseurBean.listPersonne()}"
					var="p" itemLabel="#{p.login}" itemValue="#{p.login}" />
			</h:selectOneMenu>
		</f:ajax>
					</section>
			</div>
		</div>

		<div class="row">
			<div class="12u">
				<section class="box">
		<h3>Résultats</h3>
		<h:dataTable id="result"
			value="#{gestionInvestisseurBean.rechercherTitre()}" var="t"
			styleClass="order-table" headerClass="order-table-header"
			rowClasses="order-table-odd-row,order-table-eve-row">
			<h:column>
				<f:facet name="header">ID Titre</f:facet>
				<h:outputText value="#{t.idTitre}" />
			</h:column>
			<h:column>
				<f:facet name="header">Nom Titre</f:facet>
				<h:outputText value="#{t.nomTitre}" />
			</h:column>
			<h:column>
				<f:facet name="header">ID Entreprise</f:facet>
				<h:outputText value="#{t.entreprise.idEntreprise}" />
			</h:column>
			<h:column>
				<f:facet name="header">Nom Entreprise</f:facet>
				<h:outputText value="#{t.entreprise.nomEntreprise}" />
			</h:column>
			<h:column>
				<f:facet name="header">Type de Titre</f:facet>
				<h:outputText value="#{t.typeTitre}" />
			</h:column>
			<h:column>
				<f:facet name="header">Possesseur</f:facet>
				<h:outputText />
				<h:outputText value="#{t.personne.login}" />

			</h:column>
			<h:column>
				<h:commandButton  id="toto" action="#{gestionInvestisseurBean.visiterPersonne(t.personne)}"
					value="Acceder au profil" />
			</h:column>


		</h:dataTable>
					</section>
			</div>
		</div>
		</h:form>
</section>

	<!-- Footer --> 
	<footer id="footer">
	<ul class="icons">
		<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
		<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
		<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
		<li><a href="#" class="icon fa-github"><span class="label">Github</span></a></li>
		<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
		<li><a href="#" class="icon fa-google-plus"><span
				class="label">Google+</span></a></li>
	</ul>
	<ul class="copyright">
		<li>&copy; Team Trade. All rights reserved.</li>
		<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
	</ul>
	</footer>
</h:body>

</html>
