<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Espace membre</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<h:outputScript library="default" name="javascript/jquery.min.js" />
	<h:outputScript library="default"
		name="javascript/jquery.dropotron.min.js" />
	<h:outputScript library="default"
		name="javascript/jquery.scrollgress.min.js" />
	<h:outputScript library="default" name="javascript/skel.min.js" />
	<h:outputScript library="default" name="javascript/skel-layers.min.js" />
	<h:outputScript library="default" name="javascript/init.js" />
	<noscript>
		<h:outputStylesheet library="default" name="css/skel.css" />
		<h:outputStylesheet library="default" name="css/style.css" />
		<h:outputStylesheet library="default" name="css/style-wide.css" />
	</noscript>
</h:head>


<h:body>

	<!-- Header -->
	<header id="header" class="skel-layers-fixed">
	<h1>

		<a href="../index.xhtml">Team Trade</a> par The Team | Votre Solde #{gestionInvestisseurBean.soldePersonne}€


	</h1>
	<nav id="nav">
	<ul>
		<li>connecté en tant que #{connexionBean.prenomPersonne}
			#{connexionBean.nomPersonne}</li>
		<li><a href="../index.xhtml">Accueil</a></li>
		<li><a href="" class="icon fa-angle-down">Investisseur</a>
			<ul>
				<li><h:link value="Rechercher Titres"
						outcome="/Investisseur/research.xhtml" /></li>
				<li><h:link value="Rechercher Entreprise"
						outcome="/Investisseur/research_company.xhtml" /></li>
				<li><h:link value="Accueil Investisseur"
						outcome="/Investisseur/home.xhtml" /></li>
			</ul></li>
		<li><c:if test="#{connexionBean.connected}">
				<h:form>
					<h:commandButton value="Deconnexion"
						action="#{connexionBean.doLogout}" class="button"></h:commandButton>
				</h:form>
			</c:if></li>
	</ul>
	</nav> </header>

	<!-- Main -->
	<section id="main" class="container"> <header>
	<h2>Page d'accueil Investisseur</h2>
	<p>Vous pouvez consulter ici les informations liés aux activités
		d'investissement et accéder aux fonctions de recherche.</p>
	</header>

	<div class="row">
		<div class="12u">
			<section class="box">
			<h3>Offres en cours (Emises)</h3>
			<h:form>


				<h:dataTable value="#{gestionInvestisseurBean.offresEmisesList}"
					var="o" styleClass="order-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-eve-row">
					<h:column>
						<f:facet name="header">ID Offre</f:facet>
						<h:outputText value="#{o.idOffre}" />

					</h:column>

					<h:column>
						<f:facet name="header">Type de l'offre</f:facet>
						<h:outputText value="#{o.typeOffre}" />
					</h:column>

					<h:column>
						<f:facet name="header">ID Entreprise</f:facet>
						<h:outputText value="#{o.entreprise.idEntreprise}" />
					</h:column>

					<h:column>
						<f:facet name="header">Nom Entreprise</f:facet>
						<h:outputText value="#{o.entreprise.nomEntreprise}" />
					</h:column>


					<h:column>
						<f:facet name="header">Prix de l'offre</f:facet>
						<h:outputText value="#{o.prixOffre}" />
					</h:column>

					<h:column>
						<f:facet name="header">Date offre</f:facet>
						<h:outputText value="#{o.dateOffre}" />
					</h:column>

					<h:column>
						<f:facet name="header">Quantité</f:facet>
						<h:outputText value="#{o.quantiteOffre}" />
					</h:column>

					<h:column>
						<f:facet name="header">Titre lié</f:facet>
						<c:choose>
							<c:when test="#{o.titresList.isEmpty()}">
								<h:outputText value="#{o.titresList.get(0).nomTitre}" />
							</c:when>


							<c:otherwise>

							</c:otherwise>
						</c:choose>

					</h:column>

					<h:column>
						<f:facet name="header">Statut</f:facet>
						<h:outputText value="#{o.statut}" />
					</h:column>
					<h:column>

						<h:commandButton value="Cloturer offre"
							action="#{gestionInvestisseurBean.cloturerOffre(o)}"></h:commandButton>
					</h:column>
				</h:dataTable>


				<h3>Titres</h3>
				<h:dataTable value="#{gestionInvestisseurBean.titresList}" var="t"
					styleClass="order-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-eve-row">
					<h:column>
						<f:facet name="header">ID Titre</f:facet>
						<h:outputText value="#{t.idTitre}" />
					</h:column>

					<h:column>
						<f:facet name="header">Nom Titre</f:facet>
						<h:outputText value="#{t.nomTitre}" />
					</h:column>

					<h:column>
						<f:facet name="header">ID Entreprise</f:facet>
						<h:outputText value="#{t.entreprise.idEntreprise}" />
					</h:column>

					<h:column>
						<f:facet name="header">Nom Entreprise</f:facet>
						<h:outputText value="#{t.entreprise.nomEntreprise}" />
					</h:column>



					<h:column>
						<f:facet name="header">Type de Titre</f:facet>
						<h:outputText value="#{t.typeTitre}" />
					</h:column>



					<h:column>

						<f:facet name="header">Mise en vente</f:facet>
						<h:outputText value="#{t.estVente()}" />
					</h:column>


					<h:column>


						<h:commandButton value="Stopper vente"
							action="#{gestionInvestisseurBean.retirerDuMarcherTitre(t)}"></h:commandButton>
						<h:commandButton value="Mettre en vente"
							action="#{gestionInvestisseurBean.mettreSurMarcherTitre(t)}"></h:commandButton>


					</h:column>


				</h:dataTable>

				<h3>Offres recues</h3>
				<h:dataTable value="#{gestionInvestisseurBean.offresRecuesList}"
					var="oR" styleClass="order-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-eve-row">
					<h:column>
						<f:facet name="header">ID Offre</f:facet>
						<h:outputText value="#{oR.idOffre}" />

					</h:column>

					<h:column>
						<f:facet name="header">Type de l'offre</f:facet>
						<h:outputText value="#{oR.typeOffre}" />
					</h:column>

					<h:column>
						<f:facet name="header">ID Entreprise</f:facet>
						<h:outputText value="#{oR.entreprise.idEntreprise}" />
					</h:column>

					<h:column>
						<f:facet name="header">Nom Entreprise</f:facet>
						<h:outputText value="#{oR.entreprise.nomEntreprise}" />
					</h:column>


					<h:column>
						<f:facet name="header">Prix de l'offre</f:facet>
						<h:outputText value="#{oR.prixOffre}" />
					</h:column>

					<h:column>
						<f:facet name="header">Date offre</f:facet>
						<h:outputText value="#{oR.dateOffre}" />
					</h:column>

					<h:column>
						<f:facet name="header">Quantité</f:facet>
						<h:outputText value="#{oR.quantiteOffre}" />
					</h:column>

					<h:column>
						<f:facet name="header">Titre lié</f:facet>
						<c:choose>
							<c:when test="#{oR.titresList.isEmpty()}">
								<h:outputText value="#{oR.titresList.get(0).nomTitre}" />
							</c:when>


							<c:otherwise>

							</c:otherwise>
						</c:choose>
					</h:column>

					<h:column>
						<f:facet name="header">Statut</f:facet>
						<h:outputText value="#{oR.statut}" />
					</h:column>

					<h:column>
						<h:commandButton value="Accepter offre"
							action="#{gestionInvestisseurBean.accepterOffre(oR)}"
							disabled="#{gestionInvestisseurBean.soldeSuffisant(oR)}"></h:commandButton>
						<h:commandButton value="Refuser offre"
							action="#{gestionInvestisseurBean.refuserOffre(oR)}"
							class="button special"></h:commandButton>
					</h:column>

				</h:dataTable>
			</h:form> </section>
		</div>
	</div>

	<div class="row">
		<div class="12u">
			<section class="box">
			<h3>Historiques de vos Offres (Emises)</h3>
			<h:form>
				<h:dataTable
					value="#{gestionInvestisseurBean.offreHistoriquesEmisesList}"
					var="oh" styleClass="order-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-eve-row">
					<h:column>
						<f:facet name="header">Type d'offre</f:facet>
						<h:outputText value="#{oh.typeOffreHistorique}" />

					</h:column>



					<h:column>
						<f:facet name="header">Nom Entreprise</f:facet>
						<h:outputText value="#{oh.entreprise.nomEntreprise}" />
					</h:column>


					<h:column>
						<f:facet name="header">Prix de l'offre</f:facet>
						<h:outputText value="#{oh.prixOffreHistorique}" />
					</h:column>

					<h:column>
						<f:facet name="header">Date offre</f:facet>
						<h:outputText value="#{oh.dateOffreHistorique}" />
					</h:column>

					<h:column>
						<f:facet name="header">Quantité</f:facet>
						<h:outputText value="#{oh.quantiteOffreHistorique}" />
					</h:column>

					<h:column>
						<f:facet name="header">Titre lié</f:facet>
						<c:choose>
							<c:when test="#{oh.titresList.isEmpty()}">
								<h:outputText value="#{oh.titresList.isEmpty()}"></h:outputText>
							</c:when>


							<c:otherwise>

							</c:otherwise>
						</c:choose>

					</h:column>

					<h:column>
						<f:facet name="header">Statut</f:facet>
						<h:outputText value="#{oh.statut}" />
					</h:column>


				</h:dataTable>


				<h3>Historiques de vos Offres (Reçues)</h3>
				<h:dataTable
					value="#{gestionInvestisseurBean.offreHistoriquesRecuesList}"
					var="oh" styleClass="order-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-eve-row">
					<h:column>
						<f:facet name="header">Type d'offre</f:facet>
						<h:outputText value="#{oh.typeOffreHistorique}" />

					</h:column>


					<h:column>
						<f:facet name="header">Nom Entreprise</f:facet>
						<h:outputText value="#{oh.entreprise.nomEntreprise}" />
					</h:column>


					<h:column>
						<f:facet name="header">Prix de l'offre</f:facet>
						<h:outputText value="#{oh.prixOffreHistorique}" />
					</h:column>

					<h:column>
						<f:facet name="header">Date offre</f:facet>
						<h:outputText value="#{oh.dateOffreHistorique}" />
					</h:column>

					<h:column>
						<f:facet name="header">Quantité</f:facet>
						<h:outputText value="#{oh.quantiteOffreHistorique}" />
					</h:column>

					<h:column>
						<f:facet name="header">Titre lié</f:facet>
						<c:choose>
							<c:when test="#{oh.titresList.isEmpty()}">
								<h:outputText value="#{oh.titresList.isEmpty()}"></h:outputText>
							</c:when>


							<c:otherwise>

							</c:otherwise>
						</c:choose>

					</h:column>

					<h:column>
						<f:facet name="header">Statut</f:facet>
						<h:outputText value="#{oh.statut}" />
					</h:column>


				</h:dataTable>

			</h:form> </section>
		</div>
	</div>
	</section>

	<!-- Footer -->
	<footer id="footer">
	<ul class="icons">
		<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
		<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
		<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
		<li><a href="#" class="icon fa-github"><span class="label">Github</span></a></li>
		<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
		<li><a href="#" class="icon fa-google-plus"><span
				class="label">Google+</span></a></li>
	</ul>
	<ul class="copyright">
		<li>&copy; Team Trade. All rights reserved.</li>
		<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
	</ul>
	</footer>
</h:body>

</html>
